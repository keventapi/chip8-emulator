class Memory:
    def __init__(self):
        self.memory = [0]*4096

        self._load_fontset()
    
    def _load_fontset(self):
        """Carrega o conjunto de fontes CHIP-8 na memória a partir do endereço 0x000."""
        fontset = [
            0xF0, 0x90, 0x90, 0x90, 0xF0,  # 0
            0x20, 0x60, 0x20, 0x20, 0x70,  # 1
            0xF0, 0x10, 0xF0, 0x80, 0xF0,  # 2
            0xF0, 0x10, 0xF0, 0x10, 0xF0,  # 3
            0x90, 0x90, 0xF0, 0x10, 0x10,  # 4
            0xF0, 0x80, 0xF0, 0x10, 0xF0,  # 5
            0xF0, 0x80, 0xF0, 0x90, 0xF0,  # 6
            0xF0, 0x10, 0x20, 0x40, 0x40,  # 7
            0xF0, 0x90, 0xF0, 0x90, 0xF0,  # 8
            0xF0, 0x90, 0xF0, 0x10, 0xF0,  # 9
            0xF0, 0x90, 0xF0, 0x90, 0x90,  # A
            0xE0, 0x90, 0xE0, 0x90, 0xE0,  # B
            0xF0, 0x80, 0x80, 0x80, 0xF0,  # C
            0xE0, 0x90, 0x90, 0x90, 0xE0,  # D
            0xF0, 0x80, 0xF0, 0x80, 0xF0,  # E
            0xF0, 0x80, 0xF0, 0x80, 0x80   # F
        ]
        
        for i, byte in enumerate(fontset):
            self.memory[i] = byte

    def write(self, value, address):
        self.memory[address] = value & 0xFF

    def read(self, address):
        return self.memory[address]

    def read_in_range(self, I, n):
        return self.memory[I : I+n]

    def load_rom(self, file_name, starting=0x200):
        """
        coloca na memoria as instruções da ROM apartir do indice 0x200
        """
        with open(file_name, 'rb') as f:
            rom = f.read()

        for i, byte in enumerate(rom):
            self.memory[starting + i] = byte